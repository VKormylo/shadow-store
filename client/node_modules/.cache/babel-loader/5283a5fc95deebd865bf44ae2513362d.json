{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/vital/OneDrive/Desktop/ShadowStore/shadow-store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/vital/OneDrive/Desktop/ShadowStore/shadow-store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"C:/Users/vital/OneDrive/Desktop/ShadowStore/shadow-store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/vital/OneDrive/Desktop/ShadowStore/shadow-store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{libraryAPI,shopAPI,wishlistAPI}from\"../api/api\";import{updateObjectInArray}from\"../utils/object-helpers\";var SET_STORE=\"SET_STORE\";var SET_STATUS=\"SET_STATUS\";var SET_IS_WISHLIST_EMPTY=\"SET_IS_WISHLIST_EMPTY\";var SET_VIEW=\"SET_VIEW\";var ADD_TO_LIBRARY=\"ADD_TO_LIBRARY\";var REMOVE_FROM_LIBRARY=\"REMOVE_FROM_LIBRARY\";var ADD_TO_WISHLIST=\"ADD_TO_WISHLIST\";var REMOVE_FROM_WISHLIST=\"REMOVE_FROM_WISHLIST\";var TOGGLE_IS_LOADING=\"TOGGLE_IS_LOADING\";var initialState={games:[],isWishlistEmpty:undefined,isLoading:false,view:undefined,status:undefined};var storeReducer=function storeReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_STORE:return _objectSpread(_objectSpread({},state),{},{games:_toConsumableArray(action.games)});case SET_STATUS:return _objectSpread(_objectSpread({},state),{},{status:action.status});case SET_IS_WISHLIST_EMPTY:return _objectSpread(_objectSpread({},state),{},{isWishlistEmpty:action.isWishlistEmpty});case SET_VIEW:return _objectSpread(_objectSpread({},state),{},{view:action.view});case ADD_TO_LIBRARY:return _objectSpread(_objectSpread({},state),{},{games:updateObjectInArray(state.games,action.gameId,\"id\",{added:true})});case REMOVE_FROM_LIBRARY:return _objectSpread(_objectSpread({},state),{},{games:updateObjectInArray(state.games,action.gameId,\"id\",{added:false})});case ADD_TO_WISHLIST:return _objectSpread(_objectSpread({},state),{},{isWishlistEmpty:false,games:updateObjectInArray(state.games,action.gameId,\"id\",{inWishlist:true})});case REMOVE_FROM_WISHLIST:return _objectSpread(_objectSpread({},state),{},{games:updateObjectInArray(state.games,action.gameId,\"id\",{inWishlist:false})});case TOGGLE_IS_LOADING:{return _objectSpread(_objectSpread({},state),{},{isLoading:action.isLoading});}default:return state;}};// ---------------\n// ACTION CREATORS\n// ---------------\nexport var setStore=function setStore(games){return{type:SET_STORE,games:games};};export var setStatus=function setStatus(status){return{type:SET_STATUS,status:status};};export var setView=function setView(view){return{type:SET_VIEW,view:view};};export var setIsWishlistEmpty=function setIsWishlistEmpty(isWishlistEmpty){return{type:SET_IS_WISHLIST_EMPTY,isWishlistEmpty:isWishlistEmpty};};export var addToLibraryAC=function addToLibraryAC(gameId){return{type:ADD_TO_LIBRARY,gameId:gameId};};export var removeFromLibraryAC=function removeFromLibraryAC(gameId){return{type:REMOVE_FROM_LIBRARY,gameId:gameId};};export var addToWishlistAC=function addToWishlistAC(gameId){return{type:ADD_TO_WISHLIST,gameId:gameId};};export var removeFromWishlistAC=function removeFromWishlistAC(gameId){return{type:REMOVE_FROM_WISHLIST,gameId:gameId};};export var toggleIsLoading=function toggleIsLoading(isLoading){return{type:TOGGLE_IS_LOADING,isLoading:isLoading};};// -----------------\n// GET ALL GAMES API\n// -----------------\nexport var getStore=function getStore(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(toggleIsLoading(true));shopAPI.getStore().then(function(data){dispatch(setStore(data.games));dispatch(setIsWishlistEmpty(data.isWishlistEmpty));dispatch(toggleIsLoading(false));console.log(data.games);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};// ---------------\n// STORE API CALLS\n// ---------------\nexport var getStatus=function getStatus(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(toggleIsLoading(true));_context2.next=3;return shopAPI.getStatus();case 3:response=_context2.sent;dispatch(setStatus(response.data.status));dispatch(toggleIsLoading(false));console.log(response.data.status);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var changeStatus=function changeStatus(status){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(toggleIsLoading(true));_context3.next=3;return shopAPI.changeStatus(status);case 3:response=_context3.sent;dispatch(setStatus(response.data.status));dispatch(toggleIsLoading(false));console.log(response.data.status);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};// -----------------\n// LIBRARY API CALLS\n// -----------------\nexport var addToLibrary=function addToLibrary(gameId){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(toggleIsLoading(true));dispatch(addToLibraryAC(gameId));_context4.next=4;return libraryAPI.addToLibrary(gameId);case 4:response=_context4.sent;dispatch(setStore(response.data.games));dispatch(toggleIsLoading(false));console.log(response.data.games);case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var removeFromLibrary=function removeFromLibrary(gameId){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch(toggleIsLoading(true));dispatch(removeFromLibraryAC(gameId));_context5.next=4;return libraryAPI.removeFromLibrary(gameId);case 4:response=_context5.sent;dispatch(setStore(response.data.games));dispatch(toggleIsLoading(false));console.log(response.data.games);case 8:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var downloadGame=function downloadGame(gameId){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var response;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch(toggleIsLoading(true));_context6.next=3;return libraryAPI.downloadGame(gameId);case 3:response=_context6.sent;dispatch(setStore(response.data.games));dispatch(toggleIsLoading(false));console.log(response.data.games);case 7:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref6.apply(this,arguments);};}();};export var deleteGame=function deleteGame(gameId){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var response;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch(toggleIsLoading(true));_context7.next=3;return libraryAPI.deleteGame(gameId);case 3:response=_context7.sent;dispatch(setStore(response.data.games));dispatch(toggleIsLoading(false));console.log(response.data.games);case 7:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x7){return _ref7.apply(this,arguments);};}();};export var getView=function getView(){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var response;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return libraryAPI.getView();case 2:response=_context8.sent;dispatch(setView(response.data.view));case 4:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x8){return _ref8.apply(this,arguments);};}();};export var changeView=function changeView(view){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var response;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return libraryAPI.changeView(view);case 2:response=_context9.sent;dispatch(setView(response.data.view));case 4:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x9){return _ref9.apply(this,arguments);};}();};// ------------------\n// WISHLIST API CALLS\n// ------------------\nexport var addToWishlist=function addToWishlist(gameId){return/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(dispatch){var response;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:dispatch(toggleIsLoading(true));dispatch(addToWishlistAC(gameId));_context10.next=4;return wishlistAPI.addToWishlist(gameId);case 4:response=_context10.sent;dispatch(setStore(response.data.games));dispatch(setIsWishlistEmpty(response.data.isWishlistEmpty));dispatch(toggleIsLoading(false));console.log(response.data.isWishlistEmpty);case 9:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x10){return _ref10.apply(this,arguments);};}();};export var removeFromWishlist=function removeFromWishlist(gameId){return/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(dispatch){var response;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:dispatch(toggleIsLoading(true));dispatch(removeFromWishlistAC(gameId));_context11.next=4;return wishlistAPI.removeFromWishlist(gameId);case 4:response=_context11.sent;dispatch(setStore(response.data.games));dispatch(setIsWishlistEmpty(response.data.isWishlistEmpty));dispatch(toggleIsLoading(false));console.log(response.data.games);case 9:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x11){return _ref11.apply(this,arguments);};}();};export default storeReducer;","map":{"version":3,"sources":["C:/Users/vital/OneDrive/Desktop/ShadowStore/shadow-store/client/src/redux/store-reducer.js"],"names":["libraryAPI","shopAPI","wishlistAPI","updateObjectInArray","SET_STORE","SET_STATUS","SET_IS_WISHLIST_EMPTY","SET_VIEW","ADD_TO_LIBRARY","REMOVE_FROM_LIBRARY","ADD_TO_WISHLIST","REMOVE_FROM_WISHLIST","TOGGLE_IS_LOADING","initialState","games","isWishlistEmpty","undefined","isLoading","view","status","storeReducer","state","action","type","gameId","added","inWishlist","setStore","setStatus","setView","setIsWishlistEmpty","addToLibraryAC","removeFromLibraryAC","addToWishlistAC","removeFromWishlistAC","toggleIsLoading","getStore","dispatch","then","data","console","log","getStatus","response","changeStatus","addToLibrary","removeFromLibrary","downloadGame","deleteGame","getView","changeView","addToWishlist","removeFromWishlist"],"mappings":"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","sourcesContent":["import { libraryAPI, shopAPI, wishlistAPI } from \"../api/api\";\r\nimport { updateObjectInArray } from \"../utils/object-helpers\";\r\n\r\nconst SET_STORE = \"SET_STORE\";\r\nconst SET_STATUS = \"SET_STATUS\";\r\nconst SET_IS_WISHLIST_EMPTY = \"SET_IS_WISHLIST_EMPTY\";\r\nconst SET_VIEW = \"SET_VIEW\";\r\nconst ADD_TO_LIBRARY = \"ADD_TO_LIBRARY\";\r\nconst REMOVE_FROM_LIBRARY = \"REMOVE_FROM_LIBRARY\";\r\nconst ADD_TO_WISHLIST = \"ADD_TO_WISHLIST\";\r\nconst REMOVE_FROM_WISHLIST = \"REMOVE_FROM_WISHLIST\";\r\nconst TOGGLE_IS_LOADING = \"TOGGLE_IS_LOADING\";\r\n\r\nlet initialState = {\r\n  games: [],\r\n  isWishlistEmpty: undefined,\r\n  isLoading: false,\r\n  view: undefined,\r\n  status: undefined\r\n};\r\n\r\nconst storeReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_STORE:\r\n      return { ...state, games: [...action.games] };\r\n    case SET_STATUS:\r\n      return { ...state, status: action.status };\r\n    case SET_IS_WISHLIST_EMPTY:\r\n      return { ...state, isWishlistEmpty: action.isWishlistEmpty };\r\n    case SET_VIEW:\r\n      return { ...state, view: action.view };\r\n    case ADD_TO_LIBRARY:\r\n      return {\r\n        ...state,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          added: true,\r\n        }),\r\n      };\r\n    case REMOVE_FROM_LIBRARY:\r\n      return {\r\n        ...state,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          added: false,\r\n        }),\r\n      };\r\n    case ADD_TO_WISHLIST:\r\n      return {\r\n        ...state,\r\n        isWishlistEmpty: false,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          inWishlist: true,\r\n        }),\r\n      };\r\n    case REMOVE_FROM_WISHLIST:\r\n      return {\r\n        ...state,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          inWishlist: false,\r\n        }),\r\n      };\r\n    case TOGGLE_IS_LOADING: {\r\n      return { ...state, isLoading: action.isLoading };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ---------------\r\n// ACTION CREATORS\r\n// ---------------\r\n\r\nexport const setStore = (games) => ({ type: SET_STORE, games });\r\n\r\nexport const setStatus = (status) => ({ type: SET_STATUS, status });\r\n\r\nexport const setView = (view) => ({ type: SET_VIEW, view });\r\n\r\nexport const setIsWishlistEmpty = (isWishlistEmpty) => ({\r\n  type: SET_IS_WISHLIST_EMPTY,\r\n  isWishlistEmpty,\r\n});\r\n\r\nexport const addToLibraryAC = (gameId) => ({\r\n  type: ADD_TO_LIBRARY,\r\n  gameId,\r\n});\r\n\r\nexport const removeFromLibraryAC = (gameId) => ({\r\n  type: REMOVE_FROM_LIBRARY,\r\n  gameId,\r\n});\r\n\r\nexport const addToWishlistAC = (gameId) => ({\r\n  type: ADD_TO_WISHLIST,\r\n  gameId,\r\n});\r\n\r\nexport const removeFromWishlistAC = (gameId) => ({\r\n  type: REMOVE_FROM_WISHLIST,\r\n  gameId,\r\n});\r\n\r\nexport const toggleIsLoading = (isLoading) => ({\r\n  type: TOGGLE_IS_LOADING,\r\n  isLoading,\r\n});\r\n\r\n// -----------------\r\n// GET ALL GAMES API\r\n// -----------------\r\n\r\nexport const getStore = () => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  shopAPI.getStore().then((data) => {\r\n    dispatch(setStore(data.games));\r\n    dispatch(setIsWishlistEmpty(data.isWishlistEmpty));\r\n    dispatch(toggleIsLoading(false));\r\n    console.log(data.games);\r\n  });\r\n};\r\n\r\n// ---------------\r\n// STORE API CALLS\r\n// ---------------\r\n\r\nexport const getStatus = () => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  const response = await shopAPI.getStatus();\r\n  dispatch(setStatus(response.data.status))\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.status);\r\n};\r\n\r\nexport const changeStatus = (status) => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  const response = await shopAPI.changeStatus(status);\r\n  dispatch(setStatus(response.data.status))\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.status);\r\n};\r\n\r\n// -----------------\r\n// LIBRARY API CALLS\r\n// -----------------\r\n\r\nexport const addToLibrary = (gameId) => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  dispatch(addToLibraryAC(gameId));\r\n  const response = await libraryAPI.addToLibrary(gameId);\r\n  dispatch(setStore(response.data.games));\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.games);\r\n};\r\n\r\nexport const removeFromLibrary = (gameId) => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  dispatch(removeFromLibraryAC(gameId));\r\n  const response = await libraryAPI.removeFromLibrary(gameId);\r\n  dispatch(setStore(response.data.games));\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.games);\r\n};\r\n\r\nexport const downloadGame = (gameId) => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  const response = await libraryAPI.downloadGame(gameId);\r\n  dispatch(setStore(response.data.games));\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.games);\r\n};\r\n\r\nexport const deleteGame = (gameId) => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  const response = await libraryAPI.deleteGame(gameId);\r\n  dispatch(setStore(response.data.games));\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.games);\r\n};\r\n\r\nexport const getView = () => async (dispatch) => {\r\n  const response = await libraryAPI.getView();\r\n  dispatch(setView(response.data.view));\r\n};\r\n\r\nexport const changeView = (view) => async (dispatch) => {\r\n  const response = await libraryAPI.changeView(view);\r\n  dispatch(setView(response.data.view));\r\n};\r\n\r\n// ------------------\r\n// WISHLIST API CALLS\r\n// ------------------\r\n\r\nexport const addToWishlist = (gameId) => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  dispatch(addToWishlistAC(gameId));\r\n  const response = await wishlistAPI.addToWishlist(gameId);\r\n  dispatch(setStore(response.data.games));\r\n  dispatch(setIsWishlistEmpty(response.data.isWishlistEmpty));\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.isWishlistEmpty);\r\n};\r\n\r\nexport const removeFromWishlist = (gameId) => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  dispatch(removeFromWishlistAC(gameId));\r\n  const response = await wishlistAPI.removeFromWishlist(gameId);\r\n  dispatch(setStore(response.data.games));\r\n  dispatch(setIsWishlistEmpty(response.data.isWishlistEmpty));\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.games);\r\n};\r\n\r\nexport default storeReducer;\r\n"]},"metadata":{},"sourceType":"module"}