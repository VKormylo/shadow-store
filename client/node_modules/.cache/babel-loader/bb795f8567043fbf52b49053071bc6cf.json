{"ast":null,"code":"import { shopAPI } from \"../api/api\";\nimport { updateObjectInArray } from \"../utils/object-helpers\";\nconst SET_SHOP = \"SET_SHOP\";\nconst ADD_TO_LIBRARY = \"ADD_TO_LIBRARY\";\nconst REMOVE_FROM_LIBRARY = \"REMOVE_FROM_LIBRARY\";\nconst ADD_TO_WISHLIST = \"ADD_TO_WISHLIST\";\nconst REMOVE_FROM_WISHLIST = \"REMOVE_FROM_WISHLIST\";\nlet initialState = {\n  games: [],\n  isWishlistEmpty: true\n};\n\nconst shopReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_SHOP:\n      return { ...state,\n        games: [...action.games]\n      };\n\n    case ADD_TO_LIBRARY:\n      return { ...state,\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\n          added: true\n        })\n      };\n\n    case REMOVE_FROM_LIBRARY:\n      return { ...state,\n        isWishlistEmpty: true,\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\n          added: false\n        })\n      };\n\n    case ADD_TO_WISHLIST:\n      return { ...state,\n        isWishlistEmpty: false,\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\n          inWishlist: true\n        })\n      };\n\n    case REMOVE_FROM_WISHLIST:\n      return { ...state,\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\n          inWishlist: false\n        })\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const setShop = games => ({\n  type: SET_SHOP,\n  games\n});\nexport const addToLibrary = gameId => ({\n  type: ADD_TO_LIBRARY,\n  gameId\n});\nexport const removeFromLibrary = gameId => ({\n  type: REMOVE_FROM_LIBRARY,\n  gameId\n});\nexport const addToWishlist = gameId => ({\n  type: ADD_TO_WISHLIST,\n  gameId\n});\nexport const removeFromWishlist = gameId => ({\n  type: REMOVE_FROM_WISHLIST,\n  gameId\n});\nexport const getShop = () => async dispatch => {\n  shopAPI.getShop().then(data => {\n    dispatch(setShop(data.games));\n    console.log(data.games);\n  });\n};\nexport const putToLibrary = gameId => async dispatch => {\n  const response = await shopAPI.addToLibrary(gameId);\n\n  if (response.data.resultCode === 0) {\n    dispatch(setShop(response.data.games));\n  }\n};\nexport default shopReducer;","map":{"version":3,"sources":["C:/Users/vital/OneDrive/Desktop/ShadowStore/shadow-store/src/redux/shop-reducer.js"],"names":["shopAPI","updateObjectInArray","SET_SHOP","ADD_TO_LIBRARY","REMOVE_FROM_LIBRARY","ADD_TO_WISHLIST","REMOVE_FROM_WISHLIST","initialState","games","isWishlistEmpty","shopReducer","state","action","type","gameId","added","inWishlist","setShop","addToLibrary","removeFromLibrary","addToWishlist","removeFromWishlist","getShop","dispatch","then","data","console","log","putToLibrary","response","resultCode"],"mappings":"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","sourcesContent":["import { shopAPI } from \"../api/api\";\r\nimport { updateObjectInArray } from \"../utils/object-helpers\";\r\n\r\nconst SET_SHOP = \"SET_SHOP\";\r\nconst ADD_TO_LIBRARY = \"ADD_TO_LIBRARY\";\r\nconst REMOVE_FROM_LIBRARY = \"REMOVE_FROM_LIBRARY\";\r\nconst ADD_TO_WISHLIST = \"ADD_TO_WISHLIST\";\r\nconst REMOVE_FROM_WISHLIST = \"REMOVE_FROM_WISHLIST\";\r\n\r\nlet initialState = {\r\n  games: [],\r\n  isWishlistEmpty: true,\r\n};\r\n\r\nconst shopReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_SHOP:\r\n      return { ...state, games: [...action.games] };\r\n    case ADD_TO_LIBRARY:\r\n      return {\r\n        ...state,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          added: true,\r\n        }),\r\n      };\r\n    case REMOVE_FROM_LIBRARY:\r\n      return {\r\n        ...state,\r\n        isWishlistEmpty: true,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          added: false,\r\n        }),\r\n      };\r\n    case ADD_TO_WISHLIST:\r\n      return {\r\n        ...state,\r\n        isWishlistEmpty: false,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          inWishlist: true,\r\n        }),\r\n      };\r\n    case REMOVE_FROM_WISHLIST:\r\n      return {\r\n        ...state,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          inWishlist: false,\r\n        }),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const setShop = (games) => ({ type: SET_SHOP, games });\r\nexport const addToLibrary = (gameId) => ({\r\n  type: ADD_TO_LIBRARY,\r\n  gameId,\r\n});\r\n\r\nexport const removeFromLibrary = (gameId) => ({\r\n  type: REMOVE_FROM_LIBRARY,\r\n  gameId,\r\n});\r\n\r\nexport const addToWishlist = (gameId) => ({\r\n  type: ADD_TO_WISHLIST,\r\n  gameId,\r\n});\r\n\r\nexport const removeFromWishlist = (gameId) => ({\r\n  type: REMOVE_FROM_WISHLIST,\r\n  gameId,\r\n});\r\n\r\nexport const getShop = () => async (dispatch) => {\r\n  shopAPI.getShop().then((data) => {\r\n    dispatch(setShop(data.games));\r\n    console.log(data.games);\r\n  });\r\n};\r\n\r\nexport const putToLibrary = (gameId) => async (dispatch) => {\r\n\r\n  const response = await shopAPI.addToLibrary(gameId);\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(setShop(response.data.games));\r\n  }\r\n};\r\n\r\nexport default shopReducer;\r\n"]},"metadata":{},"sourceType":"module"}