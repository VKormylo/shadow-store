{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/vital/OneDrive/Desktop/ShadowStore/shadow-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/vital/OneDrive/Desktop/ShadowStore/shadow-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import i18n from\"i18next\";import{initReactI18next}from\"react-i18next\";import{languageAPI}from\"../api/api\";import translationEN from\"../locales/en/translationEN.json\";import translationRU from\"../locales/ru/translationRU.json\";var initialState={language:undefined};console.log(initialState.language);var SET_LANGUAGE=\"SET_LANGUAGE\";var languageReducer=function languageReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_LANGUAGE:return{language:action.language};default:return state;}};export var setLanguage=function setLanguage(language){return{type:SET_LANGUAGE,language:language};};export var getLanguage=function getLanguage(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return languageAPI.getLanguage();case 2:response=_context.sent;i18n.changeLanguage(response.data.lng);dispatch(setLanguage(response.data.lng));console.log(response.data.lng);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var changeLanguage=function changeLanguage(language){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return languageAPI.changeLanguage(language);case 2:response=_context2.sent;i18n.changeLanguage(response.data.lng);dispatch(setLanguage(response.data.lng));console.log(response.data.lng);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export{languageReducer};var resources={en:{translation:translationEN},ru:{translation:translationRU}};i18n.use(initReactI18next).init({resources:resources,fallbackLng:initialState.language,interpolation:{escapeValue:false}});export default i18n;","map":{"version":3,"sources":["C:/Users/vital/OneDrive/Desktop/ShadowStore/shadow-store/src/redux/language-reducer.js"],"names":["i18n","initReactI18next","languageAPI","translationEN","translationRU","initialState","language","undefined","console","log","SET_LANGUAGE","languageReducer","state","action","type","setLanguage","getLanguage","dispatch","response","changeLanguage","data","lng","resources","en","translation","ru","use","init","fallbackLng","interpolation","escapeValue"],"mappings":"2VAAA,MAAOA,CAAAA,IAAP,KAAiB,SAAjB,CACA,OAASC,gBAAT,KAAiC,eAAjC,CACA,OAASC,WAAT,KAA4B,YAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,kCAA1B,CACA,MAAOC,CAAAA,aAAP,KAA0B,kCAA1B,CAEA,GAAIC,CAAAA,YAAY,CAAG,CACjBC,QAAQ,CAAEC,SADO,CAAnB,CAGAC,OAAO,CAACC,GAAR,CAAYJ,YAAY,CAACC,QAAzB,EACA,GAAMI,CAAAA,YAAY,CAAG,cAArB,CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAkC,IAAjCC,CAAAA,KAAiC,2DAAzBP,YAAyB,IAAXQ,CAAAA,MAAW,2CACxD,OAAQA,MAAM,CAACC,IAAf,EACE,IAAKJ,CAAAA,YAAL,CACE,MAAO,CAAEJ,QAAQ,CAAEO,MAAM,CAACP,QAAnB,CAAP,CACF,QACE,MAAOM,CAAAA,KAAP,CAJJ,CAMD,CAPD,CASA,MAAO,IAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACT,QAAD,QAAe,CAAEQ,IAAI,CAAEJ,YAAR,CAAsBJ,QAAQ,CAARA,QAAtB,CAAf,EAApB,CAEP,MAAO,IAAMU,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,kGAAM,iBAAOC,QAAP,qJACRf,CAAAA,WAAW,CAACc,WAAZ,EADQ,QACzBE,QADyB,eAE/BlB,IAAI,CAACmB,cAAL,CAAoBD,QAAQ,CAACE,IAAT,CAAcC,GAAlC,EACAJ,QAAQ,CAACF,WAAW,CAACG,QAAQ,CAACE,IAAT,CAAcC,GAAf,CAAZ,CAAR,CACAb,OAAO,CAACC,GAAR,CAAYS,QAAQ,CAACE,IAAT,CAAcC,GAA1B,EAJ+B,sDAAN,gEAApB,CAOP,MAAO,IAAMF,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACb,QAAD,kGAAc,kBAAOW,QAAP,0JACnBf,CAAAA,WAAW,CAACiB,cAAZ,CAA2Bb,QAA3B,CADmB,QACpCY,QADoC,gBAE1ClB,IAAI,CAACmB,cAAL,CAAoBD,QAAQ,CAACE,IAAT,CAAcC,GAAlC,EACAJ,QAAQ,CAACF,WAAW,CAACG,QAAQ,CAACE,IAAT,CAAcC,GAAf,CAAZ,CAAR,CACAb,OAAO,CAACC,GAAR,CAAYS,QAAQ,CAACE,IAAT,CAAcC,GAA1B,EAJ0C,wDAAd,kEAAvB,CAOP,OAASV,eAAT,EAEA,GAAMW,CAAAA,SAAS,CAAG,CAChBC,EAAE,CAAE,CACFC,WAAW,CAAErB,aADX,CADY,CAIhBsB,EAAE,CAAE,CACFD,WAAW,CAAEpB,aADX,CAJY,CAAlB,CASAJ,IAAI,CAAC0B,GAAL,CAASzB,gBAAT,EAA2B0B,IAA3B,CAAgC,CAC9BL,SAAS,CAATA,SAD8B,CAE9BM,WAAW,CAAEvB,YAAY,CAACC,QAFI,CAG9BuB,aAAa,CAAE,CAAEC,WAAW,CAAE,KAAf,CAHe,CAAhC,EAMA,cAAe9B,CAAAA,IAAf","sourcesContent":["import i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport { languageAPI } from \"../api/api\";\r\nimport translationEN from \"../locales/en/translationEN.json\";\r\nimport translationRU from \"../locales/ru/translationRU.json\";\r\n\r\nlet initialState = {\r\n  language: undefined,\r\n};\r\nconsole.log(initialState.language);\r\nconst SET_LANGUAGE = \"SET_LANGUAGE\";\r\n\r\nconst languageReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_LANGUAGE:\r\n      return { language: action.language };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const setLanguage = (language) => ({ type: SET_LANGUAGE, language });\r\n\r\nexport const getLanguage = () => async (dispatch) => {\r\n  const response = await languageAPI.getLanguage();\r\n  i18n.changeLanguage(response.data.lng);\r\n  dispatch(setLanguage(response.data.lng));\r\n  console.log(response.data.lng);\r\n};\r\n\r\nexport const changeLanguage = (language) => async (dispatch) => {\r\n  const response = await languageAPI.changeLanguage(language);\r\n  i18n.changeLanguage(response.data.lng);\r\n  dispatch(setLanguage(response.data.lng));\r\n  console.log(response.data.lng);\r\n};\r\n\r\nexport { languageReducer };\r\n\r\nconst resources = {\r\n  en: {\r\n    translation: translationEN,\r\n  },\r\n  ru: {\r\n    translation: translationRU,\r\n  },\r\n};\r\n\r\ni18n.use(initReactI18next).init({\r\n  resources,\r\n  fallbackLng: initialState.language,\r\n  interpolation: { escapeValue: false },\r\n});\r\n\r\nexport default i18n;\r\n"]},"metadata":{},"sourceType":"module"}