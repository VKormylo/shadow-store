{"ast":null,"code":"import { libraryAPI, shopAPI } from \"../api/api\";\nimport { updateObjectInArray } from \"../utils/object-helpers\";\nconst SET_SHOP = \"SET_SHOP\";\nconst ADD_TO_LIBRARY = \"ADD_TO_LIBRARY\";\nconst REMOVE_FROM_LIBRARY = \"REMOVE_FROM_LIBRARY\";\nconst ADD_TO_WISHLIST = \"ADD_TO_WISHLIST\";\nconst REMOVE_FROM_WISHLIST = \"REMOVE_FROM_WISHLIST\";\nconst TOGGLE_IS_LOADING = \"TOGGLE_IS_LOADING\";\nlet initialState = {\n  games: [],\n  isWishlistEmpty: true,\n  isLoading: false\n};\n\nconst shopReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_SHOP:\n      return { ...state,\n        games: [...action.games]\n      };\n\n    case ADD_TO_LIBRARY:\n      return { ...state,\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\n          added: true\n        })\n      };\n\n    case REMOVE_FROM_LIBRARY:\n      return { ...state,\n        isWishlistEmpty: true,\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\n          added: false\n        })\n      };\n\n    case ADD_TO_WISHLIST:\n      return { ...state,\n        isWishlistEmpty: false,\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\n          inWishlist: true\n        })\n      };\n\n    case REMOVE_FROM_WISHLIST:\n      return { ...state,\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\n          inWishlist: false\n        })\n      };\n\n    case TOGGLE_IS_LOADING:\n      {\n        return { ...state,\n          isLoading: action.isLoading\n        };\n      }\n\n    default:\n      return state;\n  }\n}; // ---------------\n// ACTION CREATORS\n// ---------------\n\n\nexport const setShop = games => ({\n  type: SET_SHOP,\n  games\n});\nexport const addToLibraryAC = gameId => ({\n  type: ADD_TO_LIBRARY,\n  gameId\n});\nexport const removeFromLibraryAC = gameId => ({\n  type: REMOVE_FROM_LIBRARY,\n  gameId\n});\nexport const addToWishlistAC = gameId => ({\n  type: ADD_TO_WISHLIST,\n  gameId\n});\nexport const removeFromWishlistAC = gameId => ({\n  type: REMOVE_FROM_WISHLIST,\n  gameId\n});\nexport const toggleIsLoading = isLoading => ({\n  type: TOGGLE_IS_LOADING,\n  isLoading\n}); // -----------------\n// GET ALL GAMES API\n// -----------------\n\nexport const getShop = () => async dispatch => {\n  dispatch(toggleIsLoading(true));\n  shopAPI.getShop().then(data => {\n    dispatch(setShop(data.games));\n    dispatch(toggleIsLoading(false));\n    console.log(data.games);\n  });\n}; // -----------------\n// LIBRARY API CALLS\n// -----------------\n\nexport const addToLibrary = gameId => async dispatch => {\n  dispatch(toggleIsLoading(true));\n  dispatch(addToLibraryAC(gameId));\n  const response = await libraryAPI.addToLibrary(gameId);\n  dispatch(setShop(response.data.games));\n  dispatch(toggleIsLoading(false));\n  console.log(response.data.games);\n};\nexport const removeFromLibrary = gameId => async dispatch => {\n  dispatch(toggleIsLoading(true));\n  dispatch(removeFromLibraryAC(gameId));\n  const response = await libraryAPI.removeFromLibrary(gameId);\n  dispatch(setShop(response.data.games));\n  dispatch(toggleIsLoading(false));\n  console.log(response.data.games);\n}; // ------------------\n// WISHLIST API CALLS\n// ------------------\n\nwishlios;\nexport const addToWishlist = gameId => async dispatch => {\n  dispatch(toggleIsLoading(true));\n  dispatch(addToWishlistAC(gameId));\n  const response = await libraryAPI.addToWishlist(gameId);\n  dispatch(setShop(response.data.games));\n  dispatch(toggleIsLoading(false));\n  console.log(response.data.games);\n};\nexport const removeFromWishlist = gameId => async dispatch => {\n  dispatch(toggleIsLoading(true));\n  dispatch(removeFromLibraryAC(gameId));\n  const response = await libraryAPI.removeFromLibrary(gameId);\n  dispatch(setShop(response.data.games));\n  dispatch(toggleIsLoading(false));\n  console.log(response.data.games);\n};\nexport default shopReducer;","map":{"version":3,"sources":["C:/Users/vital/OneDrive/Desktop/ShadowStore/shadow-store/src/redux/shop-reducer.js"],"names":["libraryAPI","shopAPI","updateObjectInArray","SET_SHOP","ADD_TO_LIBRARY","REMOVE_FROM_LIBRARY","ADD_TO_WISHLIST","REMOVE_FROM_WISHLIST","TOGGLE_IS_LOADING","initialState","games","isWishlistEmpty","isLoading","shopReducer","state","action","type","gameId","added","inWishlist","setShop","addToLibraryAC","removeFromLibraryAC","addToWishlistAC","removeFromWishlistAC","toggleIsLoading","getShop","dispatch","then","data","console","log","addToLibrary","response","removeFromLibrary","wishlios","addToWishlist","removeFromWishlist"],"mappings":"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","sourcesContent":["import { libraryAPI, shopAPI } from \"../api/api\";\r\nimport { updateObjectInArray } from \"../utils/object-helpers\";\r\n\r\nconst SET_SHOP = \"SET_SHOP\";\r\nconst ADD_TO_LIBRARY = \"ADD_TO_LIBRARY\";\r\nconst REMOVE_FROM_LIBRARY = \"REMOVE_FROM_LIBRARY\";\r\nconst ADD_TO_WISHLIST = \"ADD_TO_WISHLIST\";\r\nconst REMOVE_FROM_WISHLIST = \"REMOVE_FROM_WISHLIST\";\r\nconst TOGGLE_IS_LOADING = \"TOGGLE_IS_LOADING\";\r\n\r\nlet initialState = {\r\n  games: [],\r\n  isWishlistEmpty: true,\r\n  isLoading: false,\r\n};\r\n\r\nconst shopReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_SHOP:\r\n      return { ...state, games: [...action.games] };\r\n    case ADD_TO_LIBRARY:\r\n      return {\r\n        ...state,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          added: true,\r\n        }),\r\n      };\r\n    case REMOVE_FROM_LIBRARY:\r\n      return {\r\n        ...state,\r\n        isWishlistEmpty: true,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          added: false,\r\n        }),\r\n      };\r\n    case ADD_TO_WISHLIST:\r\n      return {\r\n        ...state,\r\n        isWishlistEmpty: false,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          inWishlist: true,\r\n        }),\r\n      };\r\n    case REMOVE_FROM_WISHLIST:\r\n      return {\r\n        ...state,\r\n        games: updateObjectInArray(state.games, action.gameId, \"id\", {\r\n          inWishlist: false,\r\n        }),\r\n      };\r\n    case TOGGLE_IS_LOADING: {\r\n      return { ...state, isLoading: action.isLoading };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ---------------\r\n// ACTION CREATORS\r\n// ---------------\r\n\r\nexport const setShop = (games) => ({ type: SET_SHOP, games });\r\n\r\nexport const addToLibraryAC = (gameId) => ({\r\n  type: ADD_TO_LIBRARY,\r\n  gameId,\r\n});\r\n\r\nexport const removeFromLibraryAC = (gameId) => ({\r\n  type: REMOVE_FROM_LIBRARY,\r\n  gameId,\r\n});\r\n\r\nexport const addToWishlistAC = (gameId) => ({\r\n  type: ADD_TO_WISHLIST,\r\n  gameId,\r\n});\r\n\r\nexport const removeFromWishlistAC = (gameId) => ({\r\n  type: REMOVE_FROM_WISHLIST,\r\n  gameId,\r\n});\r\n\r\nexport const toggleIsLoading = (isLoading) => ({\r\n  type: TOGGLE_IS_LOADING,\r\n  isLoading,\r\n});\r\n\r\n// -----------------\r\n// GET ALL GAMES API\r\n// -----------------\r\n\r\nexport const getShop = () => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  shopAPI.getShop().then((data) => {\r\n    dispatch(setShop(data.games));\r\n    dispatch(toggleIsLoading(false));\r\n    console.log(data.games);\r\n  });\r\n};\r\n\r\n// -----------------\r\n// LIBRARY API CALLS\r\n// -----------------\r\n\r\nexport const addToLibrary = (gameId) => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  dispatch(addToLibraryAC(gameId));\r\n  const response = await libraryAPI.addToLibrary(gameId);\r\n  dispatch(setShop(response.data.games));\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.games);\r\n};\r\n\r\nexport const removeFromLibrary = (gameId) => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  dispatch(removeFromLibraryAC(gameId));\r\n  const response = await libraryAPI.removeFromLibrary(gameId);\r\n  dispatch(setShop(response.data.games));\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.games);\r\n};\r\n\r\n// ------------------\r\n// WISHLIST API CALLS\r\n// ------------------\r\nwishlios\r\nexport const addToWishlist = (gameId) => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  dispatch(addToWishlistAC(gameId));\r\n  const response = await libraryAPI.addToWishlist(gameId);\r\n  dispatch(setShop(response.data.games));\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.games);\r\n};\r\n\r\nexport const removeFromWishlist = (gameId) => async (dispatch) => {\r\n  dispatch(toggleIsLoading(true));\r\n  dispatch(removeFromLibraryAC(gameId));\r\n  const response = await libraryAPI.removeFromLibrary(gameId);\r\n  dispatch(setShop(response.data.games));\r\n  dispatch(toggleIsLoading(false));\r\n  console.log(response.data.games);\r\n};\r\n\r\nexport default shopReducer;\r\n"]},"metadata":{},"sourceType":"module"}